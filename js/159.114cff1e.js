(self["webpackChunk_1timeused_quasar"]=self["webpackChunk_1timeused_quasar"]||[]).push([[159],{6159:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>Ne});var n=a(9835),s=a(499),l=a(9188),o=a.n(l),r=a(6970),u=a(9302),i=a(8542),d=a(4511);function c(){const e=(0,s.ref)(Date.now()),t=(0,s.ref)(null);(0,n.bv)((()=>{setInterval((()=>{e.value=Date.now()}),5e3)}));const a=t=>{const a=(e.value-t)/1e3;return a<60?parseInt(a)+"s ago":a>60&&a<3600?parseInt(a/60)+"m ago":a>3600&&a<86400?parseInt(a/3600)+"h ago":a>86400?parseInt(a/86400)+"d ago":void 0},l=e=>{e.target.classList.contains("chat-img")&&(t.value=e.target.getAttribute("src"))};return(0,n.bv)((()=>{document.addEventListener("click",l)})),{timeDiff:a,openedImage:t}}function m(e,t){const a=(0,n.up)("q-skeleton"),s=(0,n.up)("q-item-section"),l=(0,n.up)("q-item-label"),o=(0,n.up)("q-item"),r=(0,n.up)("q-list");return(0,n.wg)(),(0,n.j4)(r,null,{default:(0,n.w5)((()=>[((0,n.wg)(),(0,n.iD)(n.HY,null,(0,n.Ko)(8,(e=>(0,n.Wm)(o,{style:{"max-width":"300px"},key:e},{default:(0,n.w5)((()=>[(0,n.Wm)(s,{avatar:""},{default:(0,n.w5)((()=>[(0,n.Wm)(a,{type:"QAvatar"})])),_:1}),(0,n.Wm)(s,null,{default:(0,n.w5)((()=>[(0,n.Wm)(l,null,{default:(0,n.w5)((()=>[(0,n.Wm)(a,{type:"text"})])),_:1}),(0,n.Wm)(l,{caption:""},{default:(0,n.w5)((()=>[(0,n.Wm)(a,{type:"text",width:"65%"})])),_:1})])),_:1})])),_:2},1024))),64))])),_:1})}var p=a(1639),f=a(3246),g=a(490),w=a(1233),v=a(7133),h=a(3115),_=a(9984),b=a.n(_);const k={},y=(0,p.Z)(k,[["render",m]]),W=y;b()(k,"components",{QList:f.Z,QItem:g.Z,QItemSection:w.Z,QSkeleton:v.ZP,QItemLabel:h.Z});const q={class:"side-bar"},C=["src"],I=(0,n._)("span",{class:"q-ml-md"},"Conversations",-1),Z=(0,n.Uk)("Unread"),x=(0,n.Uk)("All"),Q=["src"],U={key:2,class:"absolute-center text-center text-subtitle2"},D={setup(e){const t=(0,i.useChatStore)(),a=(0,d.useAuthStore)(),{timeDiff:l}=c(),o=(0,s.ref)(""),m=(0,u.Z)(),p=((0,n.Fl)((()=>({height:m.screen.height+"px"}))),e=>{const t=e.membersInfo.find((e=>a.authUser.id!=e.id));return t.photo=t.photo?(t.photo.includes("http")?"":"https://1timeused.com/")+t.photo:a.defaultAvatar,t}),f=e=>{t.productMessageModel=null,t.newConversationUser=null,m.screen.lt.md&&(t.leftDrawerOpen=!1),t.openSelectedConversation(e)},g=(0,n.Fl)((()=>{var e;return null!==(e=o.value)&&void 0!==e&&e.trim()?t.conversations.filter((e=>{const t=e.membersInfo.find((e=>e.id!=a.authUser.id));return t.name.toLowerCase().includes(o.value.toLowerCase())})):t.conversations}));return(e,u)=>{const i=(0,n.up)("q-avatar"),d=(0,n.up)("q-space"),c=(0,n.up)("q-item-section"),m=(0,n.up)("q-item"),w=(0,n.up)("q-list"),v=(0,n.up)("q-menu"),h=(0,n.up)("q-btn"),_=(0,n.up)("q-toolbar"),b=(0,n.up)("q-icon"),k=(0,n.up)("q-input"),y=(0,n.up)("q-item-label"),D=(0,n.up)("q-scroll-area"),S=(0,n.up)("q-drawer");return(0,n.wg)(),(0,n.iD)("div",q,[(0,n.Wm)(S,{modelValue:(0,s.unref)(t).leftDrawerOpen,"onUpdate:modelValue":u[1]||(u[1]=e=>(0,s.unref)(t).leftDrawerOpen=e),"show-if-above":"",bordered:"",breakpoint:600},{default:(0,n.w5)((()=>[(0,n.Wm)(_,{class:"bg-grey-3"},{default:(0,n.w5)((()=>[(0,n.Wm)(i,{class:"cursor-pointer"},{default:(0,n.w5)((()=>[(0,n._)("img",{src:(0,s.unref)(a).profilePhoto},null,8,C)])),_:1}),I,(0,n.Wm)(d),(0,n.Wm)(h,{round:"",flat:"",icon:"more_vert"},{default:(0,n.w5)((()=>[(0,n.Wm)(v,{"auto-close":"",offset:[110,8]},{default:(0,n.w5)((()=>[(0,n.Wm)(w,{style:{"min-width":"150px"}},{default:(0,n.w5)((()=>[(0,n.Wm)(m,{clickable:""},{default:(0,n.w5)((()=>[(0,n.Wm)(c,null,{default:(0,n.w5)((()=>[Z])),_:1})])),_:1}),(0,n.Wm)(m,{clickable:""},{default:(0,n.w5)((()=>[(0,n.Wm)(c,null,{default:(0,n.w5)((()=>[x])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})])),_:1}),(0,n.Wm)(_,{class:"bg-grey-2"},{default:(0,n.w5)((()=>[(0,n.Wm)(k,{rounded:"",outlined:"",dense:"",class:"WAL__field full-width","bg-color":"white",modelValue:o.value,"onUpdate:modelValue":u[0]||(u[0]=e=>o.value=e),placeholder:"Search User"},{prepend:(0,n.w5)((()=>[(0,n.Wm)(b,{name:"search"})])),_:1},8,["modelValue"])])),_:1}),(0,n.Wm)(D,{style:{height:"calc(100% - 100px)"}},{default:(0,n.w5)((()=>[(0,s.unref)(t).conversationLoadingStatus?((0,n.wg)(),(0,n.j4)(W,{key:0})):(0,s.unref)(g).length?((0,n.wg)(),(0,n.j4)(w,{key:1},{default:(0,n.w5)((()=>[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)((0,s.unref)(g),(e=>((0,n.wg)(),(0,n.j4)(m,{key:e.id,clickable:"",onClick:t=>f(e),class:"position-relative"},{default:(0,n.w5)((()=>[(0,n.Wm)(c,{avatar:""},{default:(0,n.w5)((()=>[(0,n.Wm)(i,null,{default:(0,n.w5)((()=>[(0,n._)("img",{src:p(e).photo},null,8,Q)])),_:2},1024)])),_:2},1024),(0,n.Wm)(c,null,{default:(0,n.w5)((()=>[(0,n.Wm)(y,{lines:"1"},{default:(0,n.w5)((()=>[(0,n.Uk)((0,r.zw)(p(e).name),1)])),_:2},1024),(0,n.Wm)(y,{class:(0,r.C_)(["conversation__summary",{"text-weight-medium text-grey-9":e.senderID!=(0,s.unref)(a).authUser.id&&!e.read}]),caption:""},{default:(0,n.w5)((()=>[(0,n.Wm)(b,{name:e.read?"done_all":"check",color:e.read?"blue":"grey-6",size:"16px"},null,8,["name","color"]),(0,n.Uk)(" "+(0,r.zw)(e.senderID==(0,s.unref)(a).authUser.id?"Me":p(e).name.split(" ")[0])+" : "+(0,r.zw)(e.lastMessage?e.lastMessage.substring(0,14):"")+" "+(0,r.zw)(e.lastMessage&&e.lastMessage.length>14?"...":""),1)])),_:2},1032,["class"])])),_:2},1024),(0,n.Wm)(c,{side:""},{default:(0,n.w5)((()=>[(0,n.Wm)(y,{caption:""},{default:(0,n.w5)((()=>[(0,n.Uk)((0,r.zw)((0,s.unref)(l)(e.sentAt)),1)])),_:2},1024)])),_:2},1024)])),_:2},1032,["onClick"])))),128))])),_:1})):((0,n.wg)(),(0,n.iD)("span",U," No Conversation yet "))])),_:1})])),_:1},8,["modelValue"])])}}};var S=a(906),A=a(1663),M=a(1357),L=a(136),j=a(4455),P=a(6362),F=a(6611),T=a(2857),B=a(6663),z=a(990);const $=D,V=$;b()(D,"components",{QDrawer:S.Z,QToolbar:A.Z,QAvatar:M.Z,QSpace:L.Z,QBtn:j.Z,QMenu:P.Z,QList:f.Z,QItem:g.Z,QItemSection:w.Z,QInput:F.Z,QIcon:T.Z,QScrollArea:B.Z,QBadge:z.Z,QItemLabel:h.Z});var H=a(1957);const O={class:"column"};function R(e,t){const a=(0,n.up)("q-skeleton");return(0,n.wg)(),(0,n.iD)("div",O,[((0,n.wg)(),(0,n.iD)(n.HY,null,(0,n.Ko)(7,(e=>(0,n._)("div",{key:e,class:"flex items-center",style:(0,r.j5)(e%2==0&&"align-self:end")},[(0,n.wy)((0,n.Wm)(a,{class:"q-mr-sm mobile-view",bordered:"",type:"circle"},null,512),[[H.F8,e%2!=0]]),(0,n.Wm)(a,{width:"200px",height:"80px",class:"mobile-view"}),(0,n.wy)((0,n.Wm)(a,{class:"q-ml-sm mobile-view",bordered:"",type:"circle"},null,512),[[H.F8,e%2==0]])],4))),64))])}const K={},Y=(0,p.Z)(K,[["render",R],["__scopeId","data-v-c5eba89c"]]),E=Y;b()(K,"components",{QSkeleton:v.ZP});var J=a(4458),N=a(1821);const G={};b()(G,"components",{QCard:J.Z,QItem:g.Z,QItemSection:w.Z,QSkeleton:v.ZP,QCardActions:N.Z,QBtn:j.Z});const X={class:"modal"},ee={class:"absolute-center"},te=["src"],ae={props:{imagePath:String},setup(e){const t=e,{imagePath:a}=(0,s.toRefs)(t);return(e,t)=>((0,n.wg)(),(0,n.iD)("div",X,[(0,n._)("span",{class:"close",onClick:t[0]||(t[0]=t=>e.$emit("previewChatImageModal",!0))},"Ã—"),(0,n._)("div",ee,[(0,n._)("img",{src:(0,s.unref)(a),id:"img01"},null,8,te)])]))}},ne=(0,p.Z)(ae,[["__scopeId","data-v-2ed526c8"]]),se=ne,le=["src"],oe={class:"q-subtitle-1 q-pl-md"},re=(0,n.Uk)("Contact data"),ue=(0,n.Uk)("Block"),ie=(0,n.Uk)("Select messages"),de=(0,n.Uk)("Silence"),ce=(0,n.Uk)("Clear messages"),me=(0,n.Uk)("Erase messages"),pe={setup(e){const t=(0,i.useChatStore)(),a=(0,d.useAuthStore)(),l=(0,n.Fl)((()=>{const e=t.selectedConversation?t.selectedConversation.membersInfo.find((e=>e.id!=a.authUser.id)):t.newConversationUser;return e.photo=e.photo?(e.photo.includes("http")?"":"https://1timeused.com/")+e.photo:a.defaultAvatar,e}));return(e,a)=>{const o=(0,n.up)("q-btn"),u=(0,n.up)("q-avatar"),i=(0,n.up)("q-space"),d=(0,n.up)("q-item-section"),c=(0,n.up)("q-item"),m=(0,n.up)("q-list"),p=(0,n.up)("q-menu"),f=(0,n.up)("q-toolbar"),g=(0,n.up)("q-header");return(0,s.unref)(t).selectedConversation||(0,s.unref)(t).newConversationUser?((0,n.wg)(),(0,n.j4)(g,{key:0,elevated:""},{default:(0,n.w5)((()=>[(0,n.Wm)(f,{class:"bg-grey-3 text-black"},{default:(0,n.w5)((()=>[(0,n.Wm)(o,{round:"",flat:"",icon:"keyboard_arrow_left",class:"WAL__drawer-open q-mr-sm",onClick:a[0]||(a[0]=e=>(0,s.unref)(t).leftDrawerOpen=!(0,s.unref)(t).leftDrawerOpen)}),(0,n.Wm)(o,{round:"",flat:""},{default:(0,n.w5)((()=>[(0,n.Wm)(u,null,{default:(0,n.w5)((()=>[(0,n._)("img",{src:(0,s.unref)(l).photo},null,8,le)])),_:1})])),_:1}),(0,n._)("span",oe,(0,r.zw)((0,s.unref)(l).name),1),(0,n.Wm)(i),(0,n.Wm)(o,{round:"",flat:"",icon:"search"}),(0,n.Wm)(o,{round:"",flat:"",icon:"more_vert"},{default:(0,n.w5)((()=>[(0,n.Wm)(p,{"auto-close":"",offset:[110,0]},{default:(0,n.w5)((()=>[(0,n.Wm)(m,{style:{"min-width":"150px"}},{default:(0,n.w5)((()=>[(0,n.Wm)(c,{clickable:""},{default:(0,n.w5)((()=>[(0,n.Wm)(d,null,{default:(0,n.w5)((()=>[re])),_:1})])),_:1}),(0,n.Wm)(c,{clickable:""},{default:(0,n.w5)((()=>[(0,n.Wm)(d,null,{default:(0,n.w5)((()=>[ue])),_:1})])),_:1}),(0,n.Wm)(c,{clickable:""},{default:(0,n.w5)((()=>[(0,n.Wm)(d,null,{default:(0,n.w5)((()=>[ie])),_:1})])),_:1}),(0,n.Wm)(c,{clickable:""},{default:(0,n.w5)((()=>[(0,n.Wm)(d,null,{default:(0,n.w5)((()=>[de])),_:1})])),_:1}),(0,n.Wm)(c,{clickable:""},{default:(0,n.w5)((()=>[(0,n.Wm)(d,null,{default:(0,n.w5)((()=>[ce])),_:1})])),_:1}),(0,n.Wm)(c,{clickable:""},{default:(0,n.w5)((()=>[(0,n.Wm)(d,null,{default:(0,n.w5)((()=>[me])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})):(0,n.kq)("",!0)}}};var fe=a(6602);const ge=pe,we=ge;b()(pe,"components",{QHeader:fe.Z,QToolbar:A.Z,QBtn:j.Z,QAvatar:M.Z,QSpace:L.Z,QMenu:P.Z,QList:f.Z,QItem:g.Z,QItemSection:w.Z});var ve=a(9536);const he={class:"img-holder"},_e=["src"],be={class:"absolute-full flex flex-center"},ke={props:{imagePath:String,open:Boolean,progress:{type:Number,default:0}},emits:["closeImageUploadModal"],setup(e,{emit:t}){const a=e,{imagePath:l,open:o,progress:r}=(0,s.toRefs)(a);return(0,n.YP)(r,(e=>{e>99&&t("closeImageUploadModal")})),(e,t)=>{const a=(0,n.up)("q-card-section"),u=(0,n.up)("q-badge"),i=(0,n.up)("q-linear-progress"),d=(0,n.up)("q-btn"),c=(0,n.up)("q-card-actions"),m=(0,n.up)("q-card"),p=(0,n.up)("q-dialog");return(0,n.wg)(),(0,n.j4)(p,{modelValue:(0,s.unref)(o),"onUpdate:modelValue":t[2]||(t[2]=e=>(0,s.isRef)(o)?o.value=e:null)},{default:(0,n.w5)((()=>[(0,n.Wm)(m,{class:"modal-card bg-grey-9"},{default:(0,n.w5)((()=>[(0,n.Wm)(a,{class:"q-pa-xs"},{default:(0,n.w5)((()=>[(0,n._)("div",he,[(0,n._)("img",{src:(0,s.unref)(l),alt:"upload",class:"fit"},null,8,_e)])])),_:1}),(0,s.unref)(r)>0?((0,n.wg)(),(0,n.j4)(a,{key:0,class:"q-pa-none"},{default:(0,n.w5)((()=>[(0,n.Wm)(i,{size:"25px",value:(0,s.unref)(r)/100,color:"info"},{default:(0,n.w5)((()=>[(0,n._)("div",be,[(0,n.Wm)(u,{color:"white","text-color":"info",label:`${(0,s.unref)(r).toFixed(1)}%`},null,8,["label"])])])),_:1},8,["value"])])),_:1})):(0,n.kq)("",!0),(0,n.Wm)(c,{align:"center",class:"q-gutter-md q-mb-sm"},{default:(0,n.w5)((()=>[(0,n.Wm)(d,{size:"sm",color:"red",label:"Cancel",icon:"close",onClick:t[0]||(t[0]=t=>e.$emit("closeImageUploadModal",!0))}),(0,n.Wm)(d,{size:"sm",onClick:t[1]||(t[1]=t=>e.$emit("sendImage",!0)),color:"positive",label:"Send","icon-right":"send",loading:(0,s.unref)(r)>0},null,8,["loading"])])),_:1})])),_:1})])),_:1},8,["modelValue"])}}};var ye=a(2074),We=a(3190),qe=a(8289);const Ce=(0,p.Z)(ke,[["__scopeId","data-v-6742c66b"]]),Ie=Ce;b()(ke,"components",{QDialog:ye.Z,QCard:J.Z,QCardSection:We.Z,QLinearProgress:qe.Z,QBadge:z.Z,QCardActions:N.Z,QBtn:j.Z});var Ze=a(2373);function xe(){const e=(0,i.useChatStore)(),t=(0,s.ref)(0),a=(a,n="chat-image")=>{const s=(0,Ze.cF)(),l=(0,Ze.iH)(s,`test/images/${e.selectedConversation.id}/${Date.now()}${a.name.substring(0,5)}.${a.name.split(".").pop()}`),o=(0,Ze.B0)(l,a);o.on("state_changed",(e=>{const a=e.bytesTransferred/e.totalBytes*100;switch(t.value=a,console.log("Upload is "+a+"% done"),e.state){case"paused":console.log("Upload is paused");break;case"running":console.log("Upload is running");break}}),(e=>{}),(()=>{(0,Ze.Jt)(o.snapshot.ref).then((a=>{e.sendMessage({message:a,attachmentType:1}),setTimeout((()=>{t.value=0}),200),console.log("File available at",a)}))}))};return{uploadFileToFirebaseStorage:a,uploadProgress:t}}const Qe={setup(e){const t=(0,s.ref)(null),a=(0,s.ref)(!1),l=(0,s.ref)(null),o=(0,s.ref)(),r=(0,i.useChatStore)(),u=(0,d.useAuthStore)(),c=async()=>{var e;null!==(e=r.messageInput[p.value.id])&&void 0!==e&&e.trim()&&(await r.sendMessage({message:r.messageInput[p.value.id],attachmentType:0,senderID:u.authUser.id}),r.messageInput[p.value.id]="")};async function m(e){const n=e.target.files[0];f(n),t.value=await(0,ve.Z)(n),a.value=!0}const p=(0,n.Fl)((()=>{const e=r.selectedConversation?r.selectedConversation.membersInfo.find((e=>e.id!=u.authUser.id)):r.newConversationUser;return e.photo=e.photo?(e.photo.includes("http")?"":"https://1timeused.com/")+e.photo:u.defaultAvatar,e})),f=e=>{const t=new FileReader;t.onloadend=function(){l.value=t.result},t.readAsDataURL(e)},g=()=>{a.value=!1,l.value=null,t.value=null,o.value.value=""},{uploadFileToFirebaseStorage:w,uploadProgress:v}=xe(),h=()=>{w(t.value)};return(e,t)=>{const u=(0,n.up)("q-btn"),i=(0,n.up)("q-input"),d=(0,n.up)("q-toolbar"),f=(0,n.up)("q-footer");return(0,s.unref)(r).selectedConversation||(0,s.unref)(r).newConversationUser?((0,n.wg)(),(0,n.j4)(f,{key:0},{default:(0,n.w5)((()=>[(0,n.Wm)(d,{class:"bg-grey-3 text-black row q-px-none"},{default:(0,n.w5)((()=>[(0,n._)("input",{type:"file",ref_key:"mediaInput",ref:o,style:{display:"none"},onChange:m,accept:".png,.jpg,.Jpg,jpeg"},null,544),(0,n.Wm)(u,{round:"",flat:"",icon:"collections",class:"q-mr-sm",onClick:t[0]||(t[0]=t=>e.$refs.mediaInput.click())}),(0,n.Wm)(i,{rounded:"",outlined:"",dense:"",class:"WAL__field col-grow q-mr-sm","bg-color":"white",modelValue:(0,s.unref)(r).messageInput[(0,s.unref)(p).id],"onUpdate:modelValue":t[1]||(t[1]=e=>(0,s.unref)(r).messageInput[(0,s.unref)(p).id]=e),placeholder:"Type a message",onKeyup:(0,H.D2)(c,["enter"])},null,8,["modelValue","onKeyup"]),(0,n.Wm)(u,{onClick:c,round:"",flat:"",icon:"send"})])),_:1}),(0,n.Wm)(Ie,{imagePath:l.value,open:a.value,onCloseImageUploadModal:g,onSendImage:h,progress:(0,s.unref)(v)},null,8,["imagePath","open","progress"])])),_:1})):(0,n.kq)("",!0)}}};var Ue=a(1378);const De=Qe,Se=De;b()(Qe,"components",{QFooter:Ue.Z,QToolbar:A.Z,QBtn:j.Z,QInput:F.Z});var Ae=a(2619),Me=a(8910),Le=a(3261);const je=e=>((0,n.dD)("data-v-67477a3b"),e=e(),(0,n.Cn)(),e),Pe={class:"container"},Fe={class:"WAL position-relative"},Te={class:"q-pa-md row justify-center items-center"},Be={style:{width:"100%"}},ze={key:1,id:"messages-main-div"},$e={key:0,class:"desktop-only flex justify-center items-center column"},Ve=je((()=>(0,n._)("img",{src:o(),alt:"chat",width:"30%"},null,-1))),He=je((()=>(0,n._)("div",{class:"text-h6 q-py-md text-grey column"}," Select a chat to view conversation ",-1))),Oe=[Ve,He],Re={setup(e){const t=(0,i.useChatStore)(),a=(0,d.useAuthStore)(),l=(0,Me.useRouter)(),o=(0,Me.useRoute)(),{timeDiff:r,openedImage:m}=c(),{loginAnonymously:p}=(0,Ae.Z)(),f=((0,s.ref)(""),(0,u.Z)());(0,Le.Z)({title:"Chat"}),(0,n.bv)((()=>{a.authUser||l.push("/login"==l.options.history.state.back||"/login"==l.options.history.state.forward?l.options.history.state.back:"/login"),a.isUserAuthenticatedOnFirebase||p(),t.lookForConversationChanges(),t.paramsSellerId=o.params.id?parseInt(o.params.id):null,f.screen.lt.sm&&t.paramsSellerId&&(t.newConversationUser||t.selectedConversation)&&(t.leftDrawerOpen=!1)})),(0,n.Jd)((()=>{t.leftDrawerOpen=!0,t.newConversationUser=null,t.selectedConversation=null}));const g=e=>{const n=t.newConversationUser?t.newConversationUser:t.selectedConversation.membersInfo.find((t=>t.id==e));return n?(n.photo=n.photo?(n.photo.includes("http")?"":"https://1timeused.com/")+n.photo:a.defaultAvatar,n):n},w=()=>{console.log("tes"),t.scrollToBottom()},v=e=>{const t=e.productMessageModel,a=t.productImage.includes("http")?t.productImage:"https://1timeused.com/"+t.productImage;return`\n  <div style="max-width:210px">\n  <div class="column">\n    <span class="q-mb-md">${h(e.message)}</span>\n    <span style="font-size:0.6rem; margin-bottom:2px">This message is related to:</span>\n  </div>\n    <div class="row items-center">\n        <div class="col-5">\n              <img class="rounded-borders fit" style="max-width:110px"\n                src="${a}"\n                />\n        </div>\n        <div class="col-7">\n          <div class="text-h6 text-center" style="font-size: 12px; line-height:1rem">${t.productName}</div>\n        </div>\n  </div>\n  </div>\n  `};function h(e){var t=document.createElement("div");return t.innerText=e,t.innerHTML}return(e,l)=>{const o=(0,n.up)("q-chat-message"),u=(0,n.up)("q-btn"),i=(0,n.up)("q-page-container"),d=(0,n.up)("q-layout");return(0,n.wg)(),(0,n.iD)(n.HY,null,[(0,s.unref)(m)?((0,n.wg)(),(0,n.j4)(se,{key:0,imagePath:(0,s.unref)(m),onPreviewChatImageModal:l[0]||(l[0]=e=>m.value=null)},null,8,["imagePath"])):(0,n.kq)("",!0),(0,n._)("div",Pe,[(0,n._)("div",Fe,[(0,n.Wm)(d,{view:"lHh Lpr lFf",class:"WAL__layout shadow-3",container:""},{default:(0,n.w5)((()=>[(0,s.unref)(f).screen.gt.sm?((0,n.wg)(),(0,n.j4)(we,{key:0})):(0,n.kq)("",!0),(0,n.Wm)(V),(0,n.Wm)(i,{class:"bg-grey-2"},{default:(0,n.w5)((()=>[(0,n._)("div",Te,[(0,n._)("div",Be,[(0,s.unref)(t).chatLoadingStatus?((0,n.wg)(),(0,n.j4)(E,{key:0})):((0,n.wg)(),(0,n.iD)("div",ze,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)((0,s.unref)(t).messages,(e=>((0,n.wg)(),(0,n.j4)(o,{key:e.id,name:(0,s.unref)(a).authUser.id==e.senderID?"Me":g(e.senderID).name,avatar:(0,s.unref)(a).authUser.id==e.senderID?(0,s.unref)(a).profilePhoto:g(e.senderID).photo,text:[0!=e.attachmentType||e.productMessageModel?e.attachmentType?`<div> <img class='chat-img cursor-pointer' src='${e.message}' style='max-width:200px' /> </div>`:v(e):e.message],"text-html":!(0==e.attachmentType&&!e.productMessageModel),sent:(0,s.unref)(a).authUser.id==e.senderID,stamp:(0,s.unref)(r)(e.sentAt),"bg-color":(0,s.unref)(a).authUser.id==e.senderID?"green-5":"grey-4","text-color":((0,s.unref)(a).authUser.id,e.senderID,"black")},null,8,["name","avatar","text","text-html","sent","stamp","bg-color","text-color"])))),128)),(0,s.unref)(t).showScrollButton?((0,n.wg)(),(0,n.j4)(u,{key:0,onClick:w,class:"fixed-bottom q-mx-auto",fab:"",style:{"max-width":"40px",bottom:"55px","z-index":"1"},icon:"arrow_downward",color:"accent"})):(0,n.kq)("",!0)]))])]),(0,s.unref)(t).selectedConversation||(0,s.unref)(t).newConversationUser?(0,n.kq)("",!0):((0,n.wg)(),(0,n.iD)("div",$e,Oe))])),_:1}),(0,s.unref)(t).selectedConversation||(0,s.unref)(t).newConversationUser?((0,n.wg)(),(0,n.j4)(Se,{key:1})):(0,n.kq)("",!0)])),_:1})])])],64)}}};var Ke=a(249),Ye=a(2133),Ee=a(396);const Je=(0,p.Z)(Re,[["__scopeId","data-v-67477a3b"]]),Ne=Je;b()(Re,"components",{QLayout:Ke.Z,QPageContainer:Ye.Z,QChatMessage:Ee.Z,QBtn:j.Z})},9188:(e,t,a)=>{e.exports=a.p+"img/chat.e5759e0c.svg"}}]);