"use strict";(self["webpackChunk_1timeused_quasar"]=self["webpackChunk_1timeused_quasar"]||[]).push([[862],{862:(e,l,a)=>{a.r(l),a.d(l,{default:()=>il});var t=a(9835),o=a(1957),s=a(499),r=a(6970),n=a(4511),d=a(5413),u=a(5538),i=a(7539),c=a(9536),m=a(8910),p=a(1841);function f(){const e=(0,m.useRouter)(),l=(0,m.useRoute)(),a=(0,d.a)(),o=(0,s.ref)(null),r=(0,u.v)(),n=(0,s.ref)(""),i=(0,s.ref)("add"),f=(0,s.ref)({title:"Cloths",category_id:"",neighborhood:"",sub_category_id:"",price:"5000",color:"All",purchase_price:0,discount:0,color:"",meta_tag:"",current_stock:1,description:"This is a Good Quality Product and up to 50% off on Every Item",images:[],condition:"used",latitude:"",longitude:"",discountTil:"",brand:"Gul Ahmad",size:"6 Meters",purpose:"Rental"}),v=(0,s.ref)({images:null,Location:null});(0,t.bv)((async()=>{if(r.loadCategories(),l.params.id){const e=await p.Z.get(`products/${l.params.id}`);200==e.status&&(f.value=e.data,f.value.images=[],i.value="edit",r.loadSubCategory(f.value.category_id))}})),(0,t.YP)(f.value,(e=>{"edit"==i.value?(v.value.images=null,e.latitude&&e.longitude?v.value.Location=null:v.value.Location="Select location from given Locations"):(e.images.length?v.value.images=null:v.value.images="At least one image must be uploaded",e.latitude&&e.longitude?v.value.Location=null:v.value.Location="Select location from given Locations")}));const g=()=>{o.value.validate().then((e=>{e&&(f.value.images.length||f.value.gallery.length)&&n.value.next()}))},b=()=>{r.loadSubCategory(f.value.category_id),f.value.sub_category_id=""},_=async()=>{let l;console.log(f.value),"Donate"==f.value.purpose&&(f.value.price=0),l="edit"==i.value?await a.updateProduct(f.value):await a.addMyProduct(f.value),200==l.status&&("Donate"==l.data.purpose?e.push({path:"/donation"}):e.push({path:"/my_products"}))},y=async e=>{const l=[];for(let a=0;a<e.length&&a<10;a++)l[a]=await(0,c.Z)(e[a]);for(let a=0;a<l.length&&a<10;a++)f.value.images.push(l[a])},w=(e,l)=>{console.log(e,l),f.value.gallery.splice(e,1),p.Z["delete"](`seller/products/gallery/${l}`)};return{productForm:o,product:f,productError:v,formValidated:(0,t.Fl)((()=>o.value&&o.value.validate())),goToNextStep:g,loadSubCategory:b,submitForm:_,setFiles:y,stepper:n,actionType:i,removeOldImage:w}}const v={class:"row"},g={class:"col-12 col-md-12"},b=(0,t._)("div",{class:"label-font"},"Title:",-1),_={class:"info-text text-grey q-pb-md"},y={class:"col-12 col-md-12"},w=(0,t._)("div",{class:"label-font"},"Description:",-1),h={class:"info-text text-grey q-pb-md"},q={class:"row"},x={class:"col-4 col-md-4"},V=(0,t._)("div",{class:"label-font"},"Price:",-1),C={class:"info-text text-grey q-pb-md"},k={class:"col-4 col-md-4"},S=(0,t._)("div",{class:"label-font"},"Cataegory",-1),W={class:"info-text text-grey q-pb-md"},z={class:"col-4 col-md-4"},D=(0,t._)("div",{class:"label-font"},"SubCataegory",-1),Z={class:"info-text text-grey q-pb-md"},U={class:"row"},Q={class:"col-4 col-md-4"},P=(0,t._)("div",{class:"label-font"},"Purpose:",-1),T={class:"info-text text-grey q-pb-md"},R={class:"col-4 col-md-4"},E=(0,t._)("div",{class:"label-font"},"Condition",-1),I={class:"info-text text-grey q-pb-md"},B={class:"col-4 col-md-4"},A=(0,t._)("div",{class:"label-font"},"Color",-1),F={class:"info-text text-grey q-pb-md"},L={class:"row"},j={class:"col-4 col-md-4"},$=(0,t._)("div",{class:"label-font"},"Size:",-1),N={class:"info-text text-grey q-pb-md"},Y={class:"col-4 col-md-4"},G=(0,t._)("div",{class:"label-font"},"Total Items",-1),M={class:"info-text text-grey q-pb-md"},O={class:"col-4 col-md-4"},H=(0,t._)("div",{class:"label-font"},"Brand Name",-1),J={class:"info-text text-grey q-pb-md"},K={props:{product:Object},setup(e){const l=e,{product:a}=(0,s.toRefs)(l),o=(0,u.v)(),n=(0,s.computed)((()=>o.categories.length&&a.value.category_id?o.categories.find((e=>e.id==a.value.category_id)).title:"")),d=(0,s.computed)((()=>o.subCategories.length&&a.value.sub_category_id?o.subCategories.find((e=>e.id==a.value.sub_category_id)).title:""));return(e,l)=>((0,t.wg)(),(0,t.iD)(t.HY,null,[(0,t._)("div",v,[(0,t._)("div",g,[b,(0,t._)("div",_,(0,r.zw)((0,s.unref)(a).title),1)]),(0,t._)("div",y,[w,(0,t._)("div",h,(0,r.zw)((0,s.unref)(a).description),1)])]),(0,t._)("div",q,[(0,t._)("div",x,[V,(0,t._)("div",C,(0,r.zw)((0,s.unref)(a).price),1)]),(0,t._)("div",k,[S,(0,t._)("div",W,(0,r.zw)((0,s.unref)(n)),1)]),(0,t._)("div",z,[D,(0,t._)("div",Z,(0,r.zw)((0,s.unref)(d)),1)])]),(0,t._)("div",U,[(0,t._)("div",Q,[P,(0,t._)("div",T,(0,r.zw)((0,s.unref)(a).purpose),1)]),(0,t._)("div",R,[E,(0,t._)("div",I,(0,r.zw)((0,s.unref)(a).condition),1)]),(0,t._)("div",B,[A,(0,t._)("div",F,(0,r.zw)((0,s.unref)(a).color),1)])]),(0,t._)("div",L,[(0,t._)("div",j,[$,(0,t._)("div",N,(0,r.zw)((0,s.unref)(a).size),1)]),(0,t._)("div",Y,[G,(0,t._)("div",M,(0,r.zw)((0,s.unref)(a).current_stock),1)]),(0,t._)("div",O,[H,(0,t._)("div",J,(0,r.zw)((0,s.unref)(a).brand),1)])])],64))}},X=K,ee=X,le=e=>((0,t.dD)("data-v-391aaeb9"),e=e(),(0,t.Cn)(),e),ae={class:"container"},te={class:"w-100 justify-center"},oe={class:"q-my-md productForm"},se={class:"row"},re={class:"col-12 q-my-lg"},ne=le((()=>(0,t._)("div",{class:"label-font"},"Images:",-1))),de={class:"text-primary"},ue={class:"col-12 flex wrap-sm items-center"},ie={class:"flex"},ce=["onClick"],me={class:"col-12 q-my-lg"},pe={class:"purpose"},fe=le((()=>(0,t._)("div",{class:"label-font"},"Purpose:",-1))),ve={class:"col-md-12"},ge=le((()=>(0,t._)("div",{class:"label-font"},"Title:",-1))),be={class:"row"},_e={class:"col-md-6 col-6 q-pr-md"},ye=le((()=>(0,t._)("div",{class:"label-font"},"Categories:",-1))),we={class:"col-md-6 col-6 float-right q-pl-md"},he=le((()=>(0,t._)("div",{class:"label-font"},"Sub Categories:",-1))),qe={class:"row"},xe={key:0,class:"col-12 col-md-6 q-pr-md"},Ve=le((()=>(0,t._)("div",{class:"label-font"},"Price:",-1))),Ce=le((()=>(0,t._)("div",{class:"label-font"},"Total Items:",-1))),ke={class:"col-12 q-self-start q-my-lg"},Se={class:"conditions"},We=le((()=>(0,t._)("div",{class:"label-font"},"Conditions:",-1))),ze={class:"col-md-12"},De={class:"label-font"},Ze=(0,t.Uk)(" Neighborhood: "),Ue={class:"text-primary"},Qe={class:"col-md-12"},Pe=le((()=>(0,t._)("div",{class:"label-font"},"Description:",-1))),Te={class:"col-md-12"},Re=le((()=>(0,t._)("div",{class:"label-font"},"Brand (optional)",-1))),Ee={class:"col-md-12"},Ie=le((()=>(0,t._)("div",{class:"label-font"},"Color (optional)",-1))),Be={class:"col-md-12"},Ae=le((()=>(0,t._)("div",{class:"label-font"},"Size (optional)",-1))),Fe={class:"col-md-12"},Le=le((()=>(0,t._)("div",{class:"label-font"},"Search Keyword (optional)",-1))),je=le((()=>(0,t._)("span",{class:"q-ml-sm"},"Are You sure you want to delete this Picture",-1))),$e={setup(e){const l=(0,d.a)(),a=(0,u.v)(),{rules:c}=(0,i.Z)(),p="https://1timeused.com/",v=(0,s.ref)(!1),g=(0,s.ref)(1),b=(0,s.ref)(),_=(0,s.ref)(),y=(0,m.useRouter)(),w=(e,l)=>{v.value=!0,b.value=e,_.value=l},h=(0,n.useAuthStore)(),{product:q,productError:x,productForm:V,goToNextStep:C,loadSubCategory:k,submitForm:S,setFiles:W,stepper:z,formValidated:D,actionType:Z,removeOldImage:U}=f();return(0,t.bv)((()=>{h.authUser||y.push("/login"==y.options.history.state.back||"/login"==y.options.history.state.forward?y.options.history.state.back:"/login");const e=document.getElementById("neighborhood"),l={componentRestrictions:{country:"pk"},fields:["geometry","formatted_address","name"],strictBounds:!1,types:["geocode"]};setTimeout((()=>{const a=new google.maps.places.Autocomplete(e,l);console.log("autocomplete",a),a.addListener("place_changed",(()=>{const e=a.getPlace();q.value.neighborhood=e.formatted_address||e.name,console.log("place",e),e.geometry&&e.geometry.location?(q.value.latitude=e.geometry.location.lat(),q.value.longitude=e.geometry.location.lng()):console.log("Returned place contains no geometry")}))}),1500)})),(e,n)=>{const d=(0,t.up)("q-uploader"),u=(0,t.up)("q-tab"),i=(0,t.up)("q-tabs"),m=(0,t.up)("q-input"),f=(0,t.up)("q-select"),y=(0,t.up)("q-step"),h=(0,t.up)("q-btn"),D=(0,t.up)("q-stepper-navigation"),Q=(0,t.up)("q-stepper"),P=(0,t.up)("q-form"),T=(0,t.up)("q-card-section"),R=(0,t.up)("q-card-actions"),E=(0,t.up)("q-card"),I=(0,t.up)("q-dialog"),B=(0,t.Q2)("close-popup");return(0,t.wg)(),(0,t.iD)("div",ae,[(0,t._)("div",te,[(0,t._)("div",oe,[(0,t.Wm)(P,{action:"#",method:"post",onSubmit:(0,o.iM)((0,s.unref)(S),["prevent"]),ref_key:"productForm",ref:V},{default:(0,t.w5)((()=>[(0,t.Wm)(Q,{modelValue:g.value,"onUpdate:modelValue":n[15]||(n[15]=e=>g.value=e),ref_key:"stepper",ref:z,color:"primary","header-nav":"",animated:""},{navigation:(0,t.w5)((()=>[(0,t.Wm)(D,null,{default:(0,t.w5)((()=>[3!=g.value?((0,t.wg)(),(0,t.j4)(h,{key:0,onClick:(0,s.unref)(C),color:"primary",label:"Next"},null,8,["onClick"])):((0,t.wg)(),(0,t.j4)(h,{key:1,disable:1==(0,s.unref)(l).btnStatus,type:"submit",color:"primary",label:1==(0,s.unref)(l).btnStatus?"Loading...":"edit"==(0,s.unref)(Z)?"Update":"Submit"},null,8,["disable","label"])),g.value>1?((0,t.wg)(),(0,t.j4)(h,{key:2,flat:"",color:"primary",onClick:n[14]||(n[14]=l=>e.$refs.stepper.previous()),label:"Back",class:"q-ml-sm"})):(0,t.kq)("",!0)])),_:1})])),default:(0,t.w5)((()=>[(0,t.Wm)(y,{name:1,title:e.$q.screen.gt.xs||1==g.value?"Product Info":"1",icon:"settings",error:g.value<1,done:g.value>1},{default:(0,t.w5)((()=>[(0,t._)("div",se,[(0,t._)("div",re,[ne,(0,t.Wm)(d,{label:"images upload",multiple:"",onAdded:(0,s.unref)(W),onRemoved:(0,s.unref)(W),accept:".jpg,.png,.jpeg,.JPEG,.JPG",style:{"max-width":"300px"}},null,8,["onAdded","onRemoved"]),(0,t._)("div",null,[(0,t._)("span",de,(0,r.zw)((0,s.unref)(x).images),1)])]),(0,t._)("div",ue,[(0,t._)("div",ie,[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)((0,s.unref)(q).gallery,((e,l)=>((0,t.wg)(),(0,t.iD)("div",{key:l},[(0,t._)("div",{class:"cursor-pointer position-relative",style:(0,r.j5)([{height:"90px",width:"90px",border:"1px solid grey",margin:"10px","background-size":"cover"},`background-image: url(${(0,s.unref)(p)}/${e.path};`])},[1!=(0,s.unref)(q).gallery.length?((0,t.wg)(),(0,t.iD)("i",{key:0,onClick:a=>w(l,e.id),class:"fa fa-window-close position-absolute",style:{top:"1%",right:"1%","font-size":"16px",color:"red"}},null,8,ce)):(0,t.kq)("",!0)],4)])))),128))])])]),(0,t._)("div",me,[(0,t._)("div",pe,[fe,(0,t.Wm)(i,{modelValue:(0,s.unref)(q).purpose,"onUpdate:modelValue":n[0]||(n[0]=e=>(0,s.unref)(q).purpose=e),class:"text-teal"},{default:(0,t.w5)((()=>[(0,t.Wm)(u,{class:(0,r.C_)(["text-primary","Rental"==(0,s.unref)(q).purpose?"bg-primary text-white shadow-2":"text-primary"]),value:"Rental",name:"Rental",label:"Rental"},null,8,["class"]),(0,t.Wm)(u,{class:(0,r.C_)(["text-primary","Sale"==(0,s.unref)(q).purpose?"bg-primary text-white shadow-2":"text-primary"]),value:"Sale",name:"Sale",label:"Sale"},null,8,["class"]),(0,t.Wm)(u,{class:(0,r.C_)(["text-primary","Both"==(0,s.unref)(q).purpose?"bg-primary text-white shadow-2":"text-primary"]),value:"Both",name:"Both",label:"Both"},null,8,["class"]),(0,t.Wm)(u,{class:(0,r.C_)(["text-primary","Donate"==(0,s.unref)(q).purpose?"bg-primary text-white shadow-2":"text-primary"]),value:"Donate",name:"Donate",label:"Donate"},null,8,["class"])])),_:1},8,["modelValue"])])]),(0,t._)("div",ve,[ge,(0,t.Wm)(m,{rules:[(0,s.unref)(c).required,(0,s.unref)(c).min5],dense:"",outlined:"",modelValue:(0,s.unref)(q).title,"onUpdate:modelValue":n[1]||(n[1]=e=>(0,s.unref)(q).title=e),label:"Enter Title",class:"q-mb-md"},null,8,["rules","modelValue"])]),(0,t._)("div",be,[(0,t._)("div",_e,[ye,(0,t.Wm)(f,{dense:"",outlined:"","emit-value":"","map-options":"","option-value":"id","option-label":"title",modelValue:(0,s.unref)(q).category_id,"onUpdate:modelValue":[n[2]||(n[2]=e=>(0,s.unref)(q).category_id=e),n[3]||(n[3]=e=>(0,s.unref)(k)())],rules:[(0,s.unref)(c).required],options:(0,s.unref)(a).categories,label:"Select Category",class:"q-mb-md"},null,8,["modelValue","rules","options"])]),(0,t._)("div",we,[he,(0,t.Wm)(f,{dense:"",outlined:"","emit-value":"","map-options":"",rules:[(0,s.unref)(c).required],"option-value":"id","option-label":"title",modelValue:(0,s.unref)(q).sub_category_id,"onUpdate:modelValue":n[4]||(n[4]=e=>(0,s.unref)(q).sub_category_id=e),options:(0,s.unref)(a).subCategories,label:"Select Sub Category",class:"q-mb-md"},null,8,["rules","modelValue","options"])])]),(0,t._)("div",qe,["Donate"!=(0,s.unref)(q).purpose?((0,t.wg)(),(0,t.iD)("div",xe,[Ve,(0,t.Wm)(m,{dense:"",modelValue:(0,s.unref)(q).price,"onUpdate:modelValue":n[5]||(n[5]=e=>(0,s.unref)(q).price=e),rules:[(0,s.unref)(c).required,(0,s.unref)(c).number,(0,s.unref)(c).gt0],type:"number",outlined:"",label:"Enter Price",class:"q-mb-md"},null,8,["modelValue","rules"])])):(0,t.kq)("",!0),(0,t._)("div",{class:(0,r.C_)(["col-12 col-md-6","Donate"!=(0,s.unref)(q).purpose?"q-pl-md":"q-pr-md"])},[Ce,(0,t.Wm)(m,{dense:"",modelValue:(0,s.unref)(q).current_stock,"onUpdate:modelValue":n[6]||(n[6]=e=>(0,s.unref)(q).current_stock=e),rules:[(0,s.unref)(c).required],outlined:"",label:"Enter Total Items",class:"q-mb-md"},null,8,["modelValue","rules"])],2)]),(0,t._)("div",ke,[(0,t._)("div",Se,[We,(0,t.Wm)(i,{modelValue:(0,s.unref)(q).condition,"onUpdate:modelValue":n[7]||(n[7]=e=>(0,s.unref)(q).condition=e),class:"text-teal"},{default:(0,t.w5)((()=>[(0,t.Wm)(u,{class:(0,r.C_)(["text-primary","new"==(0,s.unref)(q).condition?"bg-primary text-white shadow-2":"text-primary"]),value:"new",name:"new",label:"New"},null,8,["class"]),(0,t.Wm)(u,{class:(0,r.C_)(["text-primary q-mr-lg-md","used"==(0,s.unref)(q).condition?"bg-primary text-white shadow-2":"text-primary"]),value:"used",name:"used",label:"used"},null,8,["class"])])),_:1},8,["modelValue"])])]),(0,t._)("div",ze,[(0,t._)("div",De,[Ze,(0,t._)("span",Ue,(0,r.zw)((0,s.unref)(x).Location),1)]),(0,t.Wm)(m,{for:"neighborhood",dense:"",rules:[(0,s.unref)(c).required],modelValue:(0,s.unref)(q).neighborhood,"onUpdate:modelValue":n[8]||(n[8]=e=>(0,s.unref)(q).neighborhood=e),outlined:"",class:"q-mb-md"},null,8,["rules","modelValue"])]),(0,t._)("div",Qe,[Pe,(0,t.Wm)(m,{dense:"",rules:[(0,s.unref)(c).required,(0,s.unref)(c).min24],modelValue:(0,s.unref)(q).description,"onUpdate:modelValue":n[9]||(n[9]=e=>(0,s.unref)(q).description=e),type:"textarea",outlined:"",label:"Enter Detail Description",class:"q-mb-md"},null,8,["rules","modelValue"])])])),_:1},8,["title","error","done"]),(0,t.Wm)(y,{name:2,title:e.$q.screen.gt.xs||2==g.value?"Additional Info":"2",icon:"add_comment",done:g.value>2},{default:(0,t.w5)((()=>[(0,t._)("div",Te,[Re,(0,t.Wm)(m,{dense:"",outlined:"",modelValue:(0,s.unref)(q).brand,"onUpdate:modelValue":n[10]||(n[10]=e=>(0,s.unref)(q).brand=e),label:"Enter Brand",class:"q-mb-md"},null,8,["modelValue"])]),(0,t._)("div",Ee,[Ie,(0,t.Wm)(m,{dense:"",outlined:"",modelValue:(0,s.unref)(q).color,"onUpdate:modelValue":n[11]||(n[11]=e=>(0,s.unref)(q).color=e),label:"Enter Color e.g (red, blue)",class:"q-mb-md"},null,8,["modelValue"])]),(0,t._)("div",Be,[Ae,(0,t.Wm)(m,{dense:"",modelValue:(0,s.unref)(q).size,"onUpdate:modelValue":n[12]||(n[12]=e=>(0,s.unref)(q).size=e),outlined:"",label:"Enter Size e.g (small, medium)",class:"q-mb-md"},null,8,["modelValue"])]),(0,t._)("div",Fe,[Le,(0,t.Wm)(m,{dense:"",outlined:"",modelValue:(0,s.unref)(q).meta_tag,"onUpdate:modelValue":n[13]||(n[13]=e=>(0,s.unref)(q).meta_tag=e),label:"Enter search keywords e.g (shoes, dress)",class:"q-mb-md"},null,8,["modelValue"])])])),_:1},8,["title","done"]),(0,t.Wm)(y,{name:3,title:e.$q.screen.gt.xs||3==g.value?"Review & Submit":"3",icon:"send"},{default:(0,t.w5)((()=>[(0,t.Wm)(ee,{product:(0,s.unref)(q)},null,8,["product"])])),_:1},8,["title"])])),_:1},8,["modelValue"])])),_:1},8,["onSubmit"])]),(0,t.Wm)(I,{modelValue:v.value,"onUpdate:modelValue":n[17]||(n[17]=e=>v.value=e),persistent:""},{default:(0,t.w5)((()=>[(0,t.Wm)(E,null,{default:(0,t.w5)((()=>[(0,t.Wm)(T,{class:"row items-center"},{default:(0,t.w5)((()=>[je])),_:1}),(0,t.Wm)(R,{align:"right"},{default:(0,t.w5)((()=>[(0,t.wy)((0,t.Wm)(h,{flat:"",label:"Cancel",color:"primary"},null,512),[[B]]),(0,t.wy)((0,t.Wm)(h,{flat:"",label:"Yes",color:"primary",onClick:n[16]||(n[16]=e=>(0,s.unref)(U)(b.value,_.value))},null,512),[[B]])])),_:1})])),_:1})])),_:1},8,["modelValue"])])])}}};var Ne=a(1639),Ye=a(8326),Ge=a(8225),Me=a(8335),Oe=a(7534),He=a(7817),Je=a(900),Ke=a(6611),Xe=a(8379),el=a(1992),ll=a(4455),al=a(2074),tl=a(4458),ol=a(3190),sl=a(1821),rl=a(2146),nl=a(9984),dl=a.n(nl);const ul=(0,Ne.Z)($e,[["__scopeId","data-v-391aaeb9"]]),il=ul;dl()($e,"components",{QForm:Ye.Z,QStepper:Ge.Z,QStep:Me.Z,QUploader:Oe.Z,QTabs:He.Z,QTab:Je.Z,QInput:Ke.Z,QSelect:Xe.Z,QStepperNavigation:el.Z,QBtn:ll.Z,QDialog:al.Z,QCard:tl.Z,QCardSection:ol.Z,QCardActions:sl.Z}),dl()($e,"directives",{ClosePopup:rl.Z})}}]);